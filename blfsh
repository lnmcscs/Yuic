local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

-- Function to handle animation detection
local function onAnimationPlayed(animationTrack)
    local animationId = animationTrack.Animation.AnimationId
    print("Animation played: " .. animationId)

    -- Check if a specific animation is detected
    if animationId == "rbxassetid://10468665991" then
        print("Specific animation detected!")
        
        -- Add a simple delay (2 seconds)
        wait(0.9)  -- Adjust the delay time (in seconds) as needed
        
        -- Add your logic here (e.g., spawning a model, starting effects)
        local BlackFlashHit = Instance.new("Part")
        game.Debris:AddItem(BlackFlashHit, 5)
        BlackFlashHit.CFrame = game.Players.LocalPlayer.Character["Right Arm"].CFrame
        local Sparks2 = Instance.new("ParticleEmitter")
        local Blast = Instance.new("ParticleEmitter")
        local Lightning = Instance.new("ParticleEmitter")
        local Wind2 = Instance.new("ParticleEmitter")
        local Sparks = Instance.new("ParticleEmitter")
        -- Properties --

        BlackFlashHit.Anchored = true
        BlackFlashHit.BottomSurface = Enum.SurfaceType.Smooth
        BlackFlashHit.CanCollide = false
        BlackFlashHit.EnableFluidForces = false
        BlackFlashHit.Size = Vector3.new(1, 1, 1)
        BlackFlashHit.TopSurface = Enum.SurfaceType.Smooth
        BlackFlashHit.Transparency = 1
        BlackFlashHit.Name = [[BlackFlashHit]]
        BlackFlashHit.Parent = workspace

        -- Setting up particle effects
        Sparks2.Acceleration = Vector3.new(0, 5, 0)
        Sparks2.Brightness = 15
        Sparks2.Color = ColorSequence.new({ColorSequenceKeypoint.new(0,Color3.new(1,0,0),0),ColorSequenceKeypoint.new(1,Color3.new(1,0,0),0)})
        Sparks2.Drag = 7
        Sparks2.EmissionDirection = Enum.NormalId.Front
        Sparks2.Enabled = false
        Sparks2.FlipbookMode = Enum.ParticleFlipbookMode.OneShot
        Sparks2.Lifetime = NumberRange.new(1,2)
        Sparks2.Orientation = Enum.ParticleOrientation.VelocityParallel
        Sparks2.Rate = 400
        Sparks2:Emit(20)
        Sparks2.RotSpeed = NumberRange.new(-300,300)
        Sparks2.Rotation = NumberRange.new(0,360)
        Sparks2.Size = NumberSequence.new({NumberSequenceKeypoint.new(0,4,2),NumberSequenceKeypoint.new(1,0,0)})
        Sparks2.Speed = NumberRange.new(20,150)
        Sparks2.SpreadAngle = Vector2.new(360, 360)
        Sparks2.Texture = [[rbxassetid://17547405831]]
        Sparks2.Name = [[Sparks2]]
        Sparks2.Parent = BlackFlashHit

        Blast.Brightness = 10
        Blast.Color = ColorSequence.new({ColorSequenceKeypoint.new(0,Color3.new(1,0,0),0),ColorSequenceKeypoint.new(1,Color3.new(1,0,0),0)})
        Blast.EmissionDirection = Enum.NormalId.Front
        Blast.Enabled = false
        Blast.Lifetime = NumberRange.new(0.05,0.05)
        Blast.Orientation = Enum.ParticleOrientation.VelocityParallel
        Blast.Rate = 200
        Blast:Emit(20)
        Blast.Rotation = NumberRange.new(-360,360)
        Blast.Size = NumberSequence.new({NumberSequenceKeypoint.new(0,10,0),NumberSequenceKeypoint.new(1,62.2016,0)})
        Blast.Speed = NumberRange.new(0.1,0.1)
        Blast.SpreadAngle = Vector2.new(360, 360)
        Blast.Squash = NumberSequence.new({NumberSequenceKeypoint.new(0,-3,0),NumberSequenceKeypoint.new(1,2.5125,0)})
        Blast.Texture = [[rbxassetid://7994629137]]
        Blast.Name = [[Blast]]
        Blast.Parent = BlackFlashHit

        Lightning.Brightness = 5
        Lightning.Color = ColorSequence.new({ColorSequenceKeypoint.new(0,Color3.new(1,0,0),0),ColorSequenceKeypoint.new(1,Color3.new(1,0,0),0)})
        Lightning.Drag = 3
        Lightning.Enabled = false
        Lightning.FlipbookFramerate = NumberRange.new(20,40)
        Lightning.FlipbookLayout = Enum.ParticleFlipbookLayout.Grid4x4
        Lightning.FlipbookStartRandom = true
        Lightning.Lifetime = NumberRange.new(0.2,1.3)
        Lightning.LockedToPart = true
        Lightning.Orientation = Enum.ParticleOrientation.VelocityPerpendicular
        Lightning.Rate = 100
        Lightning:Emit(20)
        Lightning.Rotation = NumberRange.new(0,360)
        Lightning.Size = NumberSequence.new({NumberSequenceKeypoint.new(0,0,0),NumberSequenceKeypoint.new(0.033642,12.5435,11.3034),NumberSequenceKeypoint.new(0.075642,16.0988,11.5298),NumberSequenceKeypoint.new(0.109642,9.43785,12.5917),NumberSequenceKeypoint.new(0.177642,14.175,13.7364),NumberSequenceKeypoint.new(1,13.9192,13.4744)})
        Lightning.Speed = NumberRange.new(0.001,10)
        Lightning.SpreadAngle = Vector2.new(360, 360)
        Lightning.Texture = [[rbxassetid://14255829980]]
        Lightning.ZOffset = 2
        Lightning.Name = [[Lightning]]
        Lightning.Parent = BlackFlashHit

        Wind2.Brightness = 3
        Wind2.Color = ColorSequence.new({ColorSequenceKeypoint.new(0,Color3.new(1,0,0),0),ColorSequenceKeypoint.new(1,Color3.new(1,0,0),0)})
        Wind2.Enabled = false
        Wind2.Lifetime = NumberRange.new(0.1,0.1)
        Wind2.LightEmission = 1
        Wind2.Orientation = Enum.ParticleOrientation.VelocityPerpendicular
        Wind2.Rate = 100
        Wind2:Emit(20)
        Wind2.Rotation = NumberRange.new(-360,360)
        Wind2.Size = NumberSequence.new({NumberSequenceKeypoint.new(0,80,0),NumberSequenceKeypoint.new(1,80,0)})
        Wind2.Speed = NumberRange.new(0.01,0.01)
        Wind2.SpreadAngle = Vector2.new(360, 360)
        Wind2.Squash = NumberSequence.new({NumberSequenceKeypoint.new(0,-3,0),NumberSequenceKeypoint.new(1,0,0)})
        Wind2.Texture = [[rbxassetid://1053548563]]
        Wind2.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0,0,0),NumberSequenceKeypoint.new(1,1,0)})
        Wind2.Name = [[Wind2]]
        Wind2.Parent = BlackFlashHit

        Sparks.Brightness = 15
        Sparks.Color = ColorSequence.new({ColorSequenceKeypoint.new(0,Color3.new(1,0,0),0),ColorSequenceKeypoint.new(1,Color3.new(1,0,0),0)})
        Sparks.Drag = 7
        Sparks.EmissionDirection = Enum.NormalId.Front
        Sparks.Enabled = false
        Sparks.Lifetime = NumberRange.new(0.8,1.3)
        Sparks.Orientation = Enum.ParticleOrientation.VelocityParallel
        Sparks.Rate = 400
        Sparks:Emit(20)
        Sparks.Rotation = NumberRange.new(90,90)
        Sparks.Size = NumberSequence.new({NumberSequenceKeypoint.new(0,4.02858,3.04993),NumberSequenceKeypoint.new(0.205642,1.84193,1.74011),NumberSequenceKeypoint.new(1,0,0)})
        Sparks.Speed = NumberRange.new(40,200)
        Sparks.SpreadAngle = Vector2.new(360, 360)
        Sparks.Squash = NumberSequence.new({NumberSequenceKeypoint.new(0,0,0),NumberSequenceKeypoint.new(0.231642,5.1956,0),NumberSequenceKeypoint.new(0.32206,0.844828,0),NumberSequenceKeypoint.new(0.46806,4.5586,0),NumberSequenceKeypoint.new(0.49206,0.000789245,0),NumberSequenceKeypoint.new(0.51806,3.78691,0),NumberSequenceKeypoint.new(0.56206,1.97825,0),NumberSequenceKeypoint.new(0.64006,2.28498,0),NumberSequenceKeypoint.new(0.72006,0.104659,0),NumberSequenceKeypoint.new(1,-1.15485,0)})
        Sparks.Texture = [[rbxassetid://15407518755]]
        Sparks.Name = [[Sparks]]
        Sparks.Parent = BlackFlashHit
    end
end

-- Connect the AnimationPlayed event
humanoid.AnimationPlayed:Connect(onAnimationPlayed)
